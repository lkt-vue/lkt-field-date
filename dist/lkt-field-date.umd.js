(function(n,e){typeof exports=="object"&&typeof module<"u"?module.exports=e(require("@vuepic/vue-datepicker"),require("vue"),require("lkt-string-tools")):typeof define=="function"&&define.amd?define(["@vuepic/vue-datepicker","vue","lkt-string-tools"],e):(n=typeof globalThis<"u"?globalThis:n||self,n.LktFieldDate=e(n.VueDatePicker,n.Vue,n.LktStringTools))})(this,function(n,e,f){"use strict";const k=(t=>t&&typeof t=="object"&&"default"in t?t:{default:t})(n),h=t=>t!==""?new Date(`${t}T00:00:00Z`):null,D=["data-show-ui","data-labeled"],M=["for","innerHTML"],V={class:"lkt-field-text__main"},b={name:"LktFieldDate",inheritAttrs:!1},B=e.defineComponent({...b,props:{modelValue:{type:Date,default:""},placeholder:{type:String,default:""},label:{type:String,default:""},palette:{type:String,default:""},name:{type:String,default:f.generateRandomString(16)},valid:{type:Boolean,default:!1},autocomplete:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},readMode:{type:Boolean,default:!1},allowReadModeSwitch:{type:Boolean,default:!1},tabindex:{type:Number,default:void 0},mandatory:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},reset:{type:Boolean,default:!1},resetMessage:{type:String,default:""},mandatoryMessage:{type:String,default:""},infoMessage:{type:String,default:""},errorMessage:{type:String,default:""},showPasswordMessage:{type:String,default:""},switchEditionMessage:{type:String,default:""},disabledDates:{type:Array,default:()=>[]},utc:{type:Boolean,default:!1},multiDates:{type:Boolean,default:!1},inline:{type:Boolean,default:!1},monthPicker:{type:Boolean,default:!1},timePicker:{type:Boolean,default:!1},weekPicker:{type:Boolean,default:!1},yearPicker:{type:Boolean,default:!1},preventMinMaxNavigation:{type:Boolean,default:!1},range:{type:Boolean,default:!1},autoRange:{type:[Number,String],default:()=>null},multiCalendars:{type:[Boolean,Number,String],default:()=>null},flow:{type:Array,default:()=>null},presetRanges:{type:Array,default:()=>[]},minDate:{type:Date,default:()=>null},maxDate:{type:Date,default:()=>null},emptyLabel:{type:Boolean,default:!1},modelType:{type:String,default:"yyyy-MM-dd"},format:{type:String,default:"yyyy-MM-dd"},locale:{type:String,default:"en-US"}},emits:["update:modelValue","click-info","click-error"],setup(t,{expose:w,emit:S}){const c=S,o=e.useSlots(),l=t,d=a=>a.getFullYear()+"-"+("0"+(a.getMonth()+1)).slice(-2)+"-"+("0"+a.getDate()).slice(-2),r=f.generateRandomString(16),s=e.ref(null),m=e.ref(d(l.modelValue)),i=e.ref(d(l.modelValue)),P=e.ref(!1),x=e.ref(!l.readMode),v=e.computed(()=>typeof l.valid=="function"?l.valid():l.valid),L=e.computed(()=>i.value!==m.value),N=e.computed(()=>l.reset||l.infoMessage!==""||l.errorMessage!==""),y=e.computed(()=>{let a=0;return l.reset&&++a,l.infoMessage&&++a,a}),T=e.computed(()=>{const a=["lkt-field","lkt-field-date"];return l.palette&&a.push(`lkt-field--${l.palette}`),L.value&&a.push("is-changed"),l.disabled&&a.push("is-disabled"),P.value&&a.push("has-focus"),y.value>0&&a.push("has-icons",`has-icons-${y.value}`),a.push(v.value?"is-valid":"is-error"),a.push(l.modelValue?"is-filled":"is-empty"),a.join(" ")}),C=()=>{e.nextTick(()=>{s.value&&s.value.focus()})};e.watch(()=>l.readMode,a=>x.value=!a),e.watch(()=>l.modelValue,a=>{i.value=d(a)}),e.watch(i,a=>{typeof a=="string"?c("update:modelValue",h(a)):c("update:modelValue",a)});const p=()=>i.value=m.value;return w({Identifier:r,reset:p,focus:C,value:()=>i.value,isMandatory:()=>l.mandatory}),p(),(a,g)=>{const F=e.resolveComponent("VueDatePicker");return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(T.value),"data-show-ui":N.value,"data-labeled":!e.unref(o).label},[e.unref(o).label?e.renderSlot(a.$slots,"label",{key:0}):e.createCommentVNode("",!0),e.unref(o).label?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("label",{key:1,for:e.unref(r),innerHTML:t.label},null,8,M)),e.createElementVNode("div",V,[e.createVNode(F,{modelValue:i.value,"onUpdate:modelValue":g[0]||(g[0]=u=>i.value=u),ref:u=>s.value=u,uid:e.unref(r),disabled:t.disabled,name:t.name,range:t.range,"auto-range":t.autoRange,"multi-calendars":t.multiCalendars,"month-picker":t.monthPicker,"time-picker":t.timePicker,inline:t.inline,"multi-dates":t.multiDates,flow:t.flow,utc:t.utc,"week-picker":t.weekPicker,"year-picker":t.yearPicker,"preset-ranges":t.presetRanges,"disabled-dates":t.disabledDates,"min-date":t.minDate,"max-date":t.maxDate,"prevent-min-max-navigation":t.preventMinMaxNavigation,"model-type":t.modelType,locale:t.locale,format:t.format,readonly:t.readonly||t.readMode},null,8,["modelValue","uid","disabled","name","range","auto-range","multi-calendars","month-picker","time-picker","inline","multi-dates","flow","utc","week-picker","year-picker","preset-ranges","disabled-dates","min-date","max-date","prevent-min-max-navigation","model-type","locale","format","readonly"])])],10,D)}}}),E="",A="";return{install:t=>{t.component("VueDatePicker",k.default).component("lkt-field-date",B)}}});
